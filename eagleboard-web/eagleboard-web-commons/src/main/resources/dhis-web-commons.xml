<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.5//EN"
        "http://struts.apache.org/dtds/struts-2.5.dtd">

<struts>

  <include file="struts-default.xml" />

  <!-- Properties -->

  <constant name="struts.velocity.contexts" value="com.mass3d.encoding.velocity.EncoderVelocityContext" />
  <constant name="struts.i18n.encoding" value="UTF-8" />
  <constant name="struts.multipart.parser" value="jakarta" />
  <constant name="struts.multipart.maxSize" value="1073741824" />
  <constant name="struts.directive.parse.max.depth" value="30" />

  <!-- DHIS Web Commons -->

  <package name="dhis-web-commons" extends="struts-default" namespace="/dhis-web-commons">

    <result-types>
      <result-type name="plainTextErrorResult" class="com.mass3d.result.PlainTextErrorResult" />
      <result-type name="chart" class="com.mass3d.result.ChartResult" />
      <result-type name="velocity-xml" class="com.mass3d.result.VelocityXMLResult" />
      <result-type name="velocity-json" class="com.mass3d.result.VelocityJsonResult" />
      <result-type name="velocity-javascript" class="com.mass3d.result.VelocityJavascriptResult" />
      <result-type name="velocity-cache-manifest" class="com.mass3d.result.VelocityCacheManifestResult" />
      <result-type name="outputStreamResult" class="com.mass3d.result.OutputStreamResult" />
      <!--<result-type name="gridCsvResult" class="com.mass3d.result.GridCsvResult" />-->
      <!--<result-type name="gridXlsResult" class="com.mass3d.result.GridXlsResult" />-->
      <!--<result-type name="gridPdfResult" class="com.mass3d.result.GridPdfResult" />-->
      <!--<result-type name="gridPdfInlineResult" class="com.mass3d.result.GridPdfInlineResult" />-->
      <!--<result-type name="gridJasperResult" class="com.mass3d.result.GridJasperResult" />-->
      <!--<result-type name="gridJrxmlResult" class="com.mass3d.result.GridJrxmlResult" />-->
    </result-types>

    <interceptors>
      <interceptor name="exceptionInterceptor" class="com.mass3d.interceptor.ExceptionInterceptor" />
      <!--<interceptor name="i18nInterceptor" class="com.mass3d.interceptor.I18nInterceptor" />-->
      <interceptor name="systemSettingInterceptor" class="com.mass3d.interceptor.SystemSettingInterceptor" />
      <interceptor name="userSettingInterceptor" class="com.mass3d.interceptor.UserSettingInterceptor" />
      <interceptor name="contextInterceptor" class="com.mass3d.interceptor.ContextInterceptor" />
      <interceptor name="noCacheInterceptor" class="com.mass3d.interceptor.NoCacheInterceptor" />
      <interceptor name="cacheInterceptor" class="com.mass3d.interceptor.CacheInterceptor" />

      <interceptor name="portalParamsInterceptor" class="com.mass3d.webportal.interceptor.XWorkPortalParamsInterceptor" />
      <interceptor name="portalModuleInterceptor" class="com.mass3d.webportal.interceptor.XWorkPortalModuleInterceptor" />
      <interceptor name="portalMenuInterceptor" class="com.mass3d.webportal.interceptor.XWorkPortalMenuInterceptor" />
      <interceptor name="organisationUnitTreeInterceptor" class="com.mass3d.ouwt.interceptor.OrganisationUnitTreeInterceptor" />
      <interceptor name="portalUserInterceptor" class="com.mass3d.webportal.interceptor.XWorkPortalUserInterceptor" />
      <interceptor name="securityInterceptor" class="com.mass3d.security.intercept.XWorkSecurityInterceptor" />
      <interceptor name="postHttpMethodInterceptor" class="com.mass3d.security.intercept.HttpMethodInterceptor" />
      <interceptor name="loginInterceptor" class="com.mass3d.security.intercept.LoginInterceptor" />

      <interceptor-stack name="commonInterceptors">
        <!--<interceptor-ref name="staticParams" />-->
        <!--<interceptor-ref name="params" />-->
        <!--<interceptor-ref name="i18nInterceptor" />-->
        <interceptor-ref name="systemSettingInterceptor" />
        <!-- The securityInterceptor is put after the i18nInterceptor so that the access denied error pages can use internationalization. -->
        <interceptor-ref name="securityInterceptor" />
        <interceptor-ref name="loginInterceptor" />
        <interceptor-ref name="userSettingInterceptor" />
        <interceptor-ref name="contextInterceptor" />
        <interceptor-ref name="noCacheInterceptor" />
        <interceptor-ref name="portalParamsInterceptor" />
        <interceptor-ref name="portalMenuInterceptor" />
        <interceptor-ref name="portalModuleInterceptor" />
        <interceptor-ref name="portalUserInterceptor" />
      </interceptor-stack>

      <interceptor-stack name="exceptionStack">
        <interceptor-ref name="exceptionInterceptor" />
        <interceptor-ref name="commonInterceptors" />
      </interceptor-stack>

      <interceptor-stack name="fileUploadStack">
        <interceptor-ref name="exceptionInterceptor" />
        <interceptor-ref name="fileUpload" />
        <interceptor-ref name="commonInterceptors" />
      </interceptor-stack>

      <!--<interceptor-stack name="organisationUnitTreeStack">-->
        <!--<interceptor-ref name="exceptionInterceptor" />-->
        <!--<interceptor-ref name="organisationUnitTreeInterceptor" />-->
        <!--<interceptor-ref name="commonInterceptors" />-->
      <!--</interceptor-stack>-->

      <interceptor-stack name="cacheStack">
        <interceptor-ref name="cacheInterceptor" />
        <interceptor-ref name="commonInterceptors" />
      </interceptor-stack>

    </interceptors>

    <default-interceptor-ref name="exceptionStack" />

    <global-results>
      <result name="exceptionDefault" type="velocity">/exception.vm</result>
      <result name="pageAccessDenied" type="velocity">/pageAccessDenied.vm</result>
      <result name="jsonAccessDenied" type="velocity">/dhis-web-commons/ajax/jsonAccessDenied.vm</result>
      <result name="createAccessDenied" type="velocity">/createAccessDenied.vm</result>
      <result name="readAccessDenied" type="velocity">/readAccessDenied.vm</result>
      <result name="updateAccessDenied" type="velocity">/updateAccessDenied.vm</result>
      <result name="deleteAccessDenied" type="velocity">/deleteAccessDenied.vm</result>
      <result name="plainTextError" type="plainTextErrorResult">
        <param name="parse">true</param>
        <param name="message">${exception.class.name}: ${exception.message}</param>
      </result>
    </global-results>

  </package>

  <!-- Messaging (for legacy reasons) -->
  <package name="dhis-web-messaging" extends="dhis-web-commons" namespace="/dhis-web-messaging">
    <action name="message" class="com.mass3d.commons.action.NoAction">
      <result name="success" type="redirect">/dhis-web-messaging</result>
    </action>
  </package>
  
  <!-- Security -->

  <package name="dhis-web-commons-security" extends="dhis-web-commons" namespace="/dhis-web-commons/security">

    <action name="login" class="com.mass3d.security.action.LoginAction">
      <result name="standard" type="velocity">/dhis-web-commons/security/login.vm</result>
      <result name="mobile" type="velocity">/dhis-web-commons/security/login_mobile.vm</result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="loginStrings" class="com.mass3d.i18n.action.GetStringsFromLocaleAction">
      <result name="success" type="velocity-json">/dhis-web-commons/security/loginStrings.vm</result>
    </action>

    <action name="accountStrings" class="com.mass3d.i18n.action.GetStringsFromLocaleAction">
      <result name="success" type="velocity-json">/dhis-web-commons/useraccount/accountStrings.vm</result>
    </action>

    <action name="recoveryStrings" class="com.mass3d.i18n.action.GetStringsFromLocaleAction">
      <result name="success" type="velocity-json">/dhis-web-commons/useraccount/recoveryStrings.vm</result>
    </action>

    <action name="account" class="com.mass3d.useraccount.action.IsSelfRegistrationAllowedAction">
      <result name="success" type="velocity">/dhis-web-commons/useraccount/account.vm</result>
      <result name="error" type="redirect">login.action</result>
    </action>

    <action name="expired" class="com.mass3d.useraccount.action.ExpiredAccountAction">
      <result name="success" type="velocity">/dhis-web-commons/useraccount/expired.vm</result>
      <result name="error" type="redirect">login.action</result>
    </action>

    <action name="recovery" class="com.mass3d.useraccount.action.IsAccountRecoveryAllowedAction">
      <result name="success" type="velocity">/dhis-web-commons/useraccount/recovery.vm</result>
      <result name="error" type="redirect">login.action</result>
    </action>

    <action name="restore" class="com.mass3d.useraccount.action.IsRestoreTokenValidAction">
      <result name="success" type="velocity">/dhis-web-commons/useraccount/restore.vm</result>
      <result name="error" type="redirect">login.action</result>
    </action>

    <action name="invite" class="com.mass3d.useraccount.action.IsInviteTokenValidAction">
      <result name="success" type="velocity">/dhis-web-commons/useraccount/account.vm</result>
      <result name="error" type="redirect">login.action</result>
    </action>

    <action name="getSystemAuthorities" class="com.mass3d.commons.action.GetSystemAuthoritiesAction">
      <result name="success" type="velocity-json">/dhis-web-commons/ajax/jsonSystemAuthorities.vm</result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

  </package>

  <!-- Organisation Unit Selection Tree -->

  <package name="dhis-web-commons-oust" extends="dhis-web-commons" namespace="/dhis-web-commons/oust">

    <!--<action name="expandSubtree" class="com.mass3d.oust.action.ExpandSubtreeAction">-->
      <!--<result name="success" type="velocity">-->
        <!--/dhis-web-commons/ouwt/responseExpand.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="getExpandedTree" class="com.mass3d.oust.action.GetExpandedTreeAction">-->
      <!--<result name="success" type="velocity">-->
        <!--/dhis-web-commons/ouwt/responseTree.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="setorgunit" class="com.mass3d.oust.action.SetSelectedOrganisationUnitAction">-->
      <!--<result name="success" type="velocity-json">-->
        <!--/dhis-web-commons/ouwt/responseSelect.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="addorgunit" class="com.mass3d.oust.action.AddSelectedOrganisationUnitAction">-->
      <!--<result name="success" type="velocity-json">-->
        <!--/dhis-web-commons/ouwt/responseSelect.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="removeorgunit" class="com.mass3d.oust.action.RemoveSelectedOrganisationUnitAction">-->
      <!--<result name="success" type="velocity-json">-->
        <!--/dhis-web-commons/ouwt/responseSelect.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="clearSelectedOrganisationUnits" class="com.mass3d.oust.action.ClearSelectedOrganisationUnitsAction">-->
      <!--<result name="success" type="velocity-xml">-->
        <!--/dhis-web-commons/ouwt/responseSuccess.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="selectallorgunit" class="com.mass3d.oust.action.SelectAllOrganisationUnitAction">-->
      <!--<result name="success" type="velocity-json">-->
        <!--/dhis-web-commons/ouwt/responseSelect.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="usercount" class="com.mass3d.oust.action.GetUserCountAction">-->
      <!--<result name="success" type="velocity-json">-->
        <!--/dhis-web-commons/ouwt/userCount.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

  </package>

  <!-- Organisation Unit Web Tree -->

  <package name="dhis-web-commons-ouwt" extends="dhis-web-commons" namespace="/dhis-web-commons/ouwt">

    <!--<action name="expandSubtree" class="com.mass3d.ouwt.action.ExpandSubtreeAction">-->
      <!--<result name="success" type="velocity">-->
        <!--/dhis-web-commons/ouwt/responseExpand.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="collapseSubtree" class="com.mass3d.ouwt.action.CollapseSubtreeAction">-->
      <!--<result name="success" type="velocity">-->
        <!--/dhis-web-commons/ouwt/responseCollapse.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="getExpandedTree" class="com.mass3d.ouwt.action.GetExpandedTreeAction">-->
      <!--<result name="success" type="velocity">-->
        <!--/dhis-web-commons/ouwt/responseTree.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="clearselected" class="com.mass3d.ouwt.action.ClearSelectedOrganisationUnitsAction">-->
      <!--<result name="success" type="velocity-xml">-->
        <!--/dhis-web-commons/ouwt/responseSuccess.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="getselected" class="com.mass3d.ouwt.action.GetSelectedOrganisationUnitsAction">-->
      <!--<result name="success" type="velocity-json">-->
        <!--/dhis-web-commons/ouwt/responseSelect.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="setorgunit" class="com.mass3d.ouwt.action.SetSelectedOrganisationUnitAction">-->
      <!--<result name="success" type="velocity-json">-->
        <!--/dhis-web-commons/ouwt/responseSelect.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="addorgunit" class="com.mass3d.ouwt.action.AddSelectedOrganisationUnitAction">-->
      <!--<result name="success" type="velocity-json">-->
        <!--/dhis-web-commons/ouwt/responseSelect.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="removeorgunit" class="com.mass3d.ouwt.action.RemoveSelectedOrganisationUnitAction">-->
      <!--<result name="success" type="velocity-json">-->
        <!--/dhis-web-commons/ouwt/responseSelect.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="getOrganisationUnitsByName" class="com.mass3d.ouwt.action.GetOrganisationUnitsByNameAction">-->
      <!--<result name="success" type="velocity-json">/dhis-web-commons/ouwt/responseSearch.vm</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="loadOrganisationUnitTree" class="com.mass3d.commons.action.NoAction">-->
      <!--<result name="success" type="velocity">/dhis-web-commons/ouwt/orgunittree.vm</result>-->
      <!--<interceptor-ref name="organisationUnitTreeStack" />-->
    <!--</action>-->

  </package>

  <!-- Menu -->

  <package name="dhis-web-commons-menu" extends="dhis-web-commons" namespace="/dhis-web-commons/menu">

    <action name="setMenuState" class="com.mass3d.webportal.menu.action.SetMenuStateAction">
      <result name="success" type="httpheader">
        <param name="status">204</param>
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getModules" class="com.mass3d.webportal.menu.action.GetModulesAction">
      <result name="success" type="velocity-json">/dhis-web-commons/ajax/jsonModules.vm</result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getHelpPageLinkModule" class="com.mass3d.commons.action.NoAction">
      <result name="success" type="velocity-json">/dhis-web-commons/ajax/jsonHelpPageLinkModule.vm</result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

  </package>

  <!-- i18n -->

  <package name="dhis-web-commons-i18n" extends="dhis-web-commons" namespace="/dhis-web-commons">
    <!-- TODO give i18n its own namespace and move cacheManifest action to dhis-web-commons package -->

    <action name="cacheManifest" class="com.mass3d.appcache.AppCacheAction">
      <result name="success" type="velocity-cache-manifest">/cacheManifest.vm</result>
    </action>

    <action name="i18n" class="com.mass3d.i18n.action.I18nAction">
      <result name="success" type="velocity">/main.vm</result>
      <param name="page">/dhis-web-commons/i18n/translate.vm</param>
      <param name="javascripts">../dhis-web-commons/i18n/i18n.js</param>
    </action>

    <!--<action name="translate" class="com.mass3d.i18n.action.TranslateAction">-->
      <!--<result name="success" type="velocity">/dhis-web-commons/i18n/goback.vm-->
      <!--</result>-->
      <!--<result name="input" type="redirect">-->
        <!--<param name="location">i18n.action</param>-->
        <!--<param name="className">${className}</param>-->
        <!--<param name="objectId">${objectId}</param>-->
        <!--<param name="returnUrl">${returnUrl}</param>-->
        <!--<param name="message">${message}</param>-->
        <!--<param name="parse">false</param>-->
      <!--</result>-->
    <!--</action>-->

    <!--<action name="getTranslations" class="com.mass3d.i18n.action.GetTranslationsAction">-->
      <!--<result name="success" type="velocity-json">-->
        <!--/dhis-web-commons/i18n/jsonTranslations.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <action name="i18nJavaScript" class="com.mass3d.commons.action.NoAction">
      <result name="success" type="velocity-javascript">/dhis-web-commons/i18n/i18n.vm</result>
      <interceptor-ref name="cacheStack" />
    </action>

  </package>

  <!-- Common actions XML -->

  <package name="dhis-web-commons-ajax" extends="dhis-web-commons" namespace="/dhis-web-commons-ajax">

    <!--<action name="getCategoryOptionCombos" class="com.mass3d.commons.action.GetCategoryOptionCombosAction">-->
      <!--<result name="success" type="velocity-xml">-->
        <!--/dhis-web-commons/ajax/xmlCategoryOptionCombos.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <action name="getDataElement" class="com.mass3d.commons.action.GetDataElementAction">
      <result name="success" type="velocity-xml">
        /dhis-web-commons/ajax/xmlDataElement.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getDataElementGroup" class="com.mass3d.commons.action.GetDataElementGroupAction">
      <result name="success" type="velocity-xml">
        /dhis-web-commons/ajax/xmlDataElementGroup.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getDataElementGroups" class="com.mass3d.commons.action.GetDataElementGroupsAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/xmlDataElementGroups.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getDataElementGroupSet" class="com.mass3d.commons.action.GetDataElementGroupSetAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/xmlDataElementGroupSet.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getDataElements" class="com.mass3d.commons.action.GetDataElementsAction">
      <result name="success" type="velocity-xml">
        /dhis-web-commons/ajax/xmlDataElements.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getIndicator" class="com.mass3d.commons.action.GetIndicatorAction">
      <result name="success" type="velocity-xml">
        /dhis-web-commons/ajax/xmlIndicator.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getIndicatorGroup" class="com.mass3d.commons.action.GetIndicatorGroupAction">
      <result name="success" type="velocity-xml">
        /dhis-web-commons/ajax/xmlIndicatorGroup.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getIndicatorGroups" class="com.mass3d.commons.action.GetIndicatorGroupsAction">
      <result name="success" type="velocity-xml">
        /dhis-web-commons/ajax/xmlIndicatorGroups.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getIndicatorGroupSet" class="com.mass3d.commons.action.GetIndicatorGroupSetAction">
      <result name="success" type="velocity-xml">
        /dhis-web-commons/ajax/xmlIndicatorGroupSet.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getIndicators" class="com.mass3d.commons.action.GetIndicatorsAction">
      <result name="success" type="velocity-xml">
        /dhis-web-commons/ajax/xmlIndicators.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <!--<action name="getOrganisationUnit" class="com.mass3d.commons.action.GetOrganisationUnitAction">-->
      <!--<result name="success" type="velocity-xml">-->
        <!--/dhis-web-commons/ajax/xmlOrganisationUnit.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="getOrganisationUnits" class="com.mass3d.commons.action.GetOrganisationUnitsAction">-->
      <!--<result name="success" type="velocity-xml">-->
        <!--/dhis-web-commons/ajax/xmlOrganisationUnits.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="getOrganisationUnitChildren" class="com.mass3d.commons.action.GetOrganisationUnitChildrenAction">-->
      <!--<result name="success" type="velocity-xml">-->
        <!--/dhis-web-commons/ajax/xmlOrganisationUnits.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <action name="getPeriod" class="com.mass3d.commons.action.GetPeriodAction">
      <result name="success" type="velocity-xml">
        /dhis-web-commons/ajax/xmlPeriod.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getPeriods" class="com.mass3d.commons.action.GetPeriodsAction">
      <result name="success" type="velocity-xml">
        /dhis-web-commons/ajax/xmlPeriods.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

  </package>

  <!-- Common actions HTML -->

  <package name="dhis-web-commons-ajax-html" extends="dhis-web-commons" namespace="/dhis-web-commons-ajax-html">

    <action name="getUser" class="com.mass3d.commons.action.GetUserAction">
      <result name="success" type="velocity">
        /dhis-web-commons/ajax/htmlUser.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

  </package>

  <!--&lt;!&ndash; Common actions JSON &ndash;&gt;-->

  <package name="dhis-web-commons-ajax-json" extends="dhis-web-commons" namespace="/dhis-web-commons-ajax-json">

    <!--<action name="getNotifications" class="com.mass3d.commons.action.GetNotificationsAction">-->
      <!--<result name="success" type="velocity-json">/dhis-web-commons/ajax/jsonNotifications.vm</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <action name="getUser" class="com.mass3d.commons.action.GetUserAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonUser.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getUserRoles" class="com.mass3d.commons.action.GetUserRolesAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonUserRoles.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getUsers" class="com.mass3d.commons.action.GetUsersAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonUsers.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getUserGroups" class="com.mass3d.commons.action.GetUserGroupsAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonUserGroups.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <!--<action name="getValidationRules" class="com.mass3d.commons.action.GetValidationRulesAction">-->
      <!--<result name="success" type="velocity-json">-->
        <!--/dhis-web-commons/ajax/jsonValidationRules.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="getCategoryOptionCombos" class="com.mass3d.commons.action.GetCategoryOptionCombosAction">-->
      <!--<result name="success" type="velocity-json">-->
        <!--/dhis-web-commons/ajax/jsonCategoryOptionCombos.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <action name="getDataElement" class="com.mass3d.commons.action.GetDataElementAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonDataElement.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getDataElementGroup" class="com.mass3d.commons.action.GetDataElementGroupAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonDataElementGroup.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getDataElementGroups" class="com.mass3d.commons.action.GetDataElementGroupsAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonDataElementGroups.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getDataElementGroupsMinified" class="com.mass3d.commons.action.GetDataElementGroupsAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonminDataElementGroups.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getDataElementGroupSet" class="com.mass3d.commons.action.GetDataElementGroupSetAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonDataElementGroupSet.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getDataElementGroupSets" class="com.mass3d.commons.action.GetDataElementGroupSetsAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonDataElementGroupSets.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getDataElementsNotInGroup" class="com.mass3d.commons.action.GetDataElementsNotInGroupAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonDataElements.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getDataElementName" class="com.mass3d.commons.action.GetDataElementNameAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonDataElementName.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getDataElements" class="com.mass3d.commons.action.GetDataElementsAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonDataElements.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getDataElementsMinified" class="com.mass3d.commons.action.GetDataElementsAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonminDataElements.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <!--<action name="getSectionIndicators" class="com.mass3d.commons.action.GetSectionIndicatorsAction">-->
      <!--<result name="success" type="velocity-json">-->
        <!--/dhis-web-commons/ajax/jsonIndicators.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="getDataElementCategories" class="com.mass3d.commons.action.GetDataElementCategoriesAction">-->
      <!--<result name="success" type="velocity-json">-->
        <!--/dhis-web-commons/ajax/jsonDataElementCategories.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="getDataElementCategoryOptions" class="com.mass3d.commons.action.GetCategoryOptionsAction">-->
      <!--<result name="success" type="velocity-json">-->
        <!--/dhis-web-commons/ajax/jsonDataElementCategoryOptions.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="getCategoryOptionGroups" class="com.mass3d.commons.action.GetCategoryOptionGroupsAction">-->
      <!--<result name="success" type="velocity-json">-->
        <!--/dhis-web-commons/ajax/jsonCategoryOptionGroups.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <action name="getDataSet" class="com.mass3d.commons.action.GetDataSetAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonDataSet.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getDataSets" class="com.mass3d.commons.action.GetDataSetsAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonDataSets.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getDataSetsMinified" class="com.mass3d.commons.action.GetDataSetsAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonminDataSets.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getDataSets" class="com.mass3d.commons.action.GetDataSetsAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonDataSets.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getIndicator" class="com.mass3d.commons.action.GetIndicatorAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonIndicator.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getIndicatorGroup" class="com.mass3d.commons.action.GetIndicatorGroupAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonIndicatorGroup.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getIndicatorGroups" class="com.mass3d.commons.action.GetIndicatorGroupsAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonIndicatorGroups.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getIndicatorGroupsMinified" class="com.mass3d.commons.action.GetIndicatorGroupsAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonminIndicatorGroups.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getIndicatorGroupSet" class="com.mass3d.commons.action.GetIndicatorGroupSetAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonIndicatorGroupSet.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getIndicatorGroupSets" class="com.mass3d.commons.action.GetIndicatorGroupSetsAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonIndicatorGroupSets.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getIndicators" class="com.mass3d.commons.action.GetIndicatorsAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonIndicators.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getIndicatorsMinified" class="com.mass3d.commons.action.GetIndicatorsAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonminIndicators.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <!--<action name="getOrganisationUnit" class="com.mass3d.commons.action.GetOrganisationUnitAction">-->
      <!--<result name="success" type="velocity-json">-->
        <!--/dhis-web-commons/ajax/jsonOrganisationUnit.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="getOrganisationUnitGroups" class="com.mass3d.commons.action.GetOrganisationUnitGroupsAction">-->
      <!--<result name="success" type="velocity-json">-->
        <!--/dhis-web-commons/ajax/jsonOrganisationUnitGroups.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="getOrganisationUnitGroupsByGroupSet" class="com.mass3d.commons.action.GetOrganisationUnitGroupsByGroupSetAction">-->
      <!--<result name="success" type="velocity-json">-->
        <!--/dhis-web-commons/ajax/jsonOrganisationUnitGroups.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="getOrganisationUnitGroupSets" class="com.mass3d.commons.action.GetOrganisationUnitGroupSetsAction">-->
      <!--<result name="success" type="velocity-json">-->
        <!--/dhis-web-commons/ajax/jsonOrganisationUnitGroupSets.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="getOrganisationUnitGroupSetsMinified" class="com.mass3d.commons.action.GetOrganisationUnitGroupSetsAction">-->
      <!--<result name="success" type="velocity-json">-->
        <!--/dhis-web-commons/ajax/jsonminOrganisationUnitGroupSets.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="getOrganisationUnitChildren" class="com.mass3d.commons.action.GetOrganisationUnitChildrenAction">-->
      <!--<result name="success" type="velocity-json">-->
        <!--/dhis-web-commons/ajax/jsonOrganisationUnits.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="getOrganisationUnitLevels" class="com.mass3d.commons.action.GetOrganisationUnitLevelsAction">-->
      <!--<result name="success" type="velocity-json">-->
        <!--/dhis-web-commons/ajax/jsonOrganisationUnitLevels.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="getOrganisationUnits" class="com.mass3d.commons.action.GetOrganisationUnitsAction">-->
      <!--<result name="success" type="velocity-json">-->
        <!--/dhis-web-commons/ajax/jsonOrganisationUnits.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="getOrganisationUnitTree" class="com.mass3d.commons.action.GetOrganisationUnitTreeAction">-->
      <!--<result name="success" type="velocity-json">/dhis-web-commons/ajax/jsonOrganisationUnitTree.vm</result>-->
      <!--<result name="partial" type="velocity-json">/dhis-web-commons/ajax/jsonOrganisationUnitTreePartial.vm</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <!--<action name="getAttributes" class="com.mass3d.commons.action.GetAttributesAction">-->
      <!--<result name="success" type="velocity-json">-->
        <!--/dhis-web-commons/ajax/jsonAttributes.vm-->
      <!--</result>-->
      <!--<param name="onExceptionReturn">plainTextError</param>-->
    <!--</action>-->

    <action name="getPeriod" class="com.mass3d.commons.action.GetPeriodAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonPeriod.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getPeriods" class="com.mass3d.commons.action.GetPeriodsAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonPeriods.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="getConstants" class="com.mass3d.commons.action.GetConstantsAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonConstants.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

  </package>

  <!-- Stream -->

  <package name="dhis-web-commons-stream" extends="dhis-web-commons" namespace="/dhis-web-commons-stream">

    <action name="ping" class="com.mass3d.commons.action.GetPingAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonPing.vm
      </result>
    </action>

  </package>

  <!-- About -->

  <package name="dhis-web-commons-about" extends="dhis-web-commons" namespace="/dhis-web-commons-about">

    <action name="about" class="com.mass3d.about.action.AboutAction">
      <result name="success" type="velocity">/main.vm</result>
      <param name="page">/dhis-web-commons/about/about.vm</param>
      <param name="menu">/dhis-web-commons/about/menu.vm</param>
    </action>

    <action name="help" class="com.mass3d.commons.action.NoAction">
      <result name="success" type="velocity">/main.vm</result>
      <param name="page">/dhis-web-commons/about/help.vm</param>
      <param name="menu">/dhis-web-commons/about/menu.vm</param>
      <param name="javascripts">../dhis-web-commons/about/help.js</param>
    </action>

    <action name="getHelpContent" class="com.mass3d.help.action.GetHelpContentAction">
      <result name="success" type="outputStreamResult" />
    </action>

    <action name="getHelpItems" class="com.mass3d.help.action.GetHelpItemsAction">
      <result name="success" type="outputStreamResult" />
    </action>

    <action name="showUpdateUserAccountForm" class="com.mass3d.useraccount.action.GetCurrentUserAction">
      <result name="success" type="velocity">/main.vm</result>
      <param name="page">/dhis-web-commons/useraccount/updateUserAccountForm.vm</param>
      <param name="menu">/dhis-web-commons/about/menuDashboard.vm</param>
    </action>

    <action name="showUpdateUserProfileForm" class="com.mass3d.useraccount.action.GetCurrentUserAction">
      <result name="success" type="velocity">/main.vm</result>
      <param name="page">/dhis-web-commons/useraccount/updateUserProfileForm.vm</param>
      <param name="menu">/dhis-web-commons/about/menuDashboard.vm</param>
    </action>

    <action name="updateUserAccount" class="com.mass3d.useraccount.action.UpdateUserAccountAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonResponseSuccess.vm
      </result>
      <result name="input" type="velocity-json">
        /dhis-web-commons/ajax/jsonResponseError.vm
      </result>
    </action>

    <action name="updateUserProfile" class="com.mass3d.useraccount.action.UpdateUserProfileAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonResponseSuccess.vm
      </result>
      <result name="error" type="velocity-json">
        /dhis-web-commons/ajax/jsonResponseError.vm
      </result>
    </action>

    <action name="modules" class="com.mass3d.commons.action.NoAction">
      <result name="success" type="redirect">/dhis-web-menu-management/</result>
    </action>

    <action name="functions" class="com.mass3d.commons.action.NoAction">
      <result name="success" type="velocity">/main.vm</result>
      <param name="page">/dhis-web-commons/about/functions.vm</param>
      <param name="menu">/dhis-web-commons/about/menu.vm</param>
      <param name="hideMenu">true</param>
    </action>

    <action name="userSettings" class="com.mass3d.settings.user.action.GetGeneralSettingsAction">
      <result name="success" type="velocity">/main.vm</result>
      <param name="page">/dhis-web-commons/settings/userGeneralSettings.vm</param>
      <param name="menu">/dhis-web-commons/about/menuDashboard.vm</param>
    </action>

    <action name="setUserSettings" class="com.mass3d.settings.user.action.SetGeneralSettingsAction">
      <result name="success" type="velocity-json">
        /dhis-web-commons/ajax/jsonResponseSuccess.vm
      </result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>

    <action name="redirect" class="com.mass3d.about.action.RedirectAction">
      <result name="success" type="redirect">${redirectUrl}</result>
    </action>

  </package>
</struts>
